# Задача
Есть запросы поиска от пользователя по документам. Нужно сделать функцию предложения вариантов на основе:
- а) поисковых запросов самого пользователя;
- б) поисковых запросов других пользователей.

Нужно rest api, его описание на openapi

И реализация DRF + PostgreSQL 

# Требования
- Python 3.8.0
- Django 2.2.7
- Postgre SQL с БД:
    -	'NAME': 'postgres',
	-	'USER': 'postgres',
	-	'PASSWORD': 'mysecretpassword',
	-	'HOST': '127.0.0.1',
	-	'PORT': '5432'
	
# Запуск
В консоли выполняем команды попорядку:
````
python manage.py makemigrations
python manage.py migrate
python manage.py runserver
````
В браузере доступны ресурсы: 
- http://127.0.0.1:8000/ - Django REST framework Api Root
- http://127.0.0.1:8000/docs/ - Swagger
- http://127.0.0.1:8000/requests/ - ресурс для запроса
- http://127.0.0.1:8000/requestresponse/ - ресурс для ответа на запрос

# Алгоритм
- входящий запрос "чистим" и сохраняем в таблицу app_request с id равным хэшкоду очищенной строки
    - original - оригинальная строка запроса
    - purified - очищенная строка, по ней строится хэш для id, что позволит быстро находить результат предложений поиска
    - результат можно забирать для скорости отклика два раза:
      - первый - из таблицы RequestResponse по хэшу запроса (если такой запрос уже был)
      - второй - после обновления значения записи в app_request_response
    
- оригинальную строку разбиваем на слова и сохраняем в таблицу app_word
  - существует таблица app_stopword для исключения служебных слов (союзы, местоимения...)
  - id для слов являются хэши этих слов
  
- сохраняем в таблицу app_wordinrequest ссылки на слова для текущего запроса

- сохраняем в таблицу app_wordpositionsinrequest позицию слова в предложении запроса

- сохраняем в таблицу app_requestresponse ссылку на запросы, в которых присутствует слово (поиск релевантных запросов происходит по таблице app_totalindex)
 
# TODO
- не сделана оценка релевантности. Для этого надо проверить последовательность слов в запросе с найденными результатами, 
(у более полного совпадения индекс дорлжен быть больше) и отсортировать requestresponse при отдаче по убыванию этого индекса 